<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="me.strand.mapper.AnnouncementMapper">

    <sql id="announcementSummaryQuery">
        ${alias}id_announcement,
        ${alias}type,
        ${alias}title,
        ${alias}content,
        ${alias}tstamp
    </sql>

    <resultMap id="announcementSummaryResult" type="AnnouncementSummary">
        <id column="id_announcement" property="idAnnouncement" javaType="java.lang.Integer" jdbcType="INTEGER"/>
        <result column="type" property="type" javaType="java.lang.Short" jdbcType="SMALLINT"/>
        <result column="title" property="title" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result column="content" property="content" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result column="tstamp" property="tstamp" javaType="java.time.LocalDateTime" jdbcType="TIMESTAMP"/>
    </resultMap>

    <select id="getAnnouncementSummaries" resultMap="announcementSummaryResult">
        SELECT
        <include refid="announcementSummaryQuery">
            <property name="alias" value="a."/>
        </include>
        FROM announcement AS a
    </select>
</mapper>